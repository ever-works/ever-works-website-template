{
  "openapi": "3.0.3",
  "info": {
    "title": "Ever Works Website Template API",
    "description": "REST API documentation for the Ever Works website template. This template provides a complete foundation for building modern web applications with authentication, user management, favorites, and content management features.",
    "version": "1.0.0",
    "contact": {
      "name": "Ever Works Team",
      "url": "https://ever.works"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    },
    {
      "url": "https://your-domain.com",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication and session management"
    },
    {
      "name": "Favorites",
      "description": "User favorites management"
    },
    {
      "name": "Featured Items",
      "description": "Featured content management"
    },
    {
      "name": "Utilities",
      "description": "Utility endpoints"
    },
    {
      "name": "Admin - Categories",
      "description": "Admin endpoints for category management"
    },
    {
      "name": "Version",
      "description": "Version and repository information"
    },
    {
      "name": "Payments - Stripe",
      "description": "Stripe payment method management"
    },
    {
      "name": "Payments - LemonSqueezy",
      "description": "LemonSqueezy payment processing"
    },
    {
      "name": "Items & Content",
      "description": "Item management, comments, and voting"
    },
    {
      "name": "Admin - Users",
      "description": "Admin endpoints for user management"
    },
    {
      "name": "Admin - Items",
      "description": "Admin endpoints for item management"
    },
    {
      "name": "Admin - Comments",
      "description": "Admin endpoints for comment management"
    },
    {
      "name": "User Management",
      "description": "User profile and subscription management"
    }
  ],
  "paths": {
    "/api/current-user": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Get current authenticated user",
        "description": "Returns the current authenticated user's session information (id, name, email, image, provider, isAdmin) or null if no active session exists. This endpoint does not require authentication and can be called by anyone to check session status.",
        "responses": {
          "200": {
            "description": "Current user information or null if not authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/SafeUser"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "examples": {
                  "authenticated": {
                    "summary": "Authenticated user",
                    "value": {
                      "id": "user_2a3b4c5d",
                      "name": "John Doe",
                      "email": "john.doe@example.com",
                      "image": "https://lh3.googleusercontent.com/a/example",
                      "provider": "google",
                      "isAdmin": false
                    }
                  },
                  "unauthenticated": {
                    "summary": "Unauthenticated user",
                    "value": null
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/favorites": {
      "get": {
        "tags": ["Favorites"],
        "summary": "Get user's favorites",
        "description": "Returns a list of the current user's favorite items, ordered by creation date (newest first). Each favorite includes item metadata (slug, name, icon, category) and timestamps.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of user favorites",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FavoritesResponse"
                },
                "example": {
                  "success": true,
                  "favorites": [
                    {
                      "id": "fav_2a3b4c5d",
                      "userId": "user_2a3b4c5d",
                      "itemSlug": "awesome-productivity-tool",
                      "itemName": "Awesome Productivity Tool",
                      "itemIconUrl": "https://cdn.example.com/icons/productivity-tool.png",
                      "itemCategory": "productivity",
                      "createdAt": "2024-01-15T10:30:00.123Z",
                      "updatedAt": "2024-01-15T10:30:00.123Z"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": ["Favorites"],
        "summary": "Add item to favorites",
        "description": "Adds a new item to the user's favorites list",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddFavoriteRequest"
              },
              "example": {
                "itemSlug": "awesome-tool",
                "itemName": "Awesome Tool",
                "itemIconUrl": "https://example.com/icon.png",
                "itemCategory": "productivity"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Favorite added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddFavoriteResponse"
                },
                "example": {
                  "success": true,
                  "favorite": {
                    "id": "fav_2a3b4c5d",
                    "userId": "user_2a3b4c5d",
                    "itemSlug": "awesome-productivity-tool",
                    "itemName": "Awesome Productivity Tool",
                    "itemIconUrl": "https://cdn.example.com/icons/productivity-tool.png",
                    "itemCategory": "productivity",
                    "createdAt": "2024-01-15T10:30:00.123Z",
                    "updatedAt": "2024-01-15T10:30:00.123Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error - invalid request data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "validation_error": {
                    "summary": "Zod validation failed",
                    "value": {
                      "success": false,
                      "error": "Invalid request data",
                      "details": "Required at \"itemSlug\""
                    }
                  },
                  "missing_field": {
                    "summary": "Required field missing",
                    "value": {
                      "success": false,
                      "error": "Invalid request data",
                      "details": "String must contain at least 1 character(s) at \"itemName\""
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "409": {
            "description": "Item already in favorites",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Item is already in favorites"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/favorites/{itemSlug}": {
      "delete": {
        "tags": ["Favorites"],
        "summary": "Remove item from favorites",
        "description": "Removes an item from the current user's favorites list. First verifies that the favorite exists and belongs to the authenticated user before deletion. Returns 404 if the favorite doesn't exist or doesn't belong to the user.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "parameters": [
          {
            "name": "itemSlug",
            "in": "path",
            "required": true,
            "description": "The slug identifier of the item to remove from favorites",
            "schema": {
              "type": "string",
              "minLength": 1,
              "example": "awesome-productivity-tool"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Favorite removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "message": "Favorite removed successfully"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "description": "Favorite not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Favorite not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/featured-items": {
      "get": {
        "tags": ["Featured Items"],
        "summary": "Get featured items",
        "description": "Returns a list of active featured items for public display, ordered by featuredOrder (desc) then featuredAt (desc). By default excludes expired items (where featuredUntil < now), but includes items with no expiration date (featuredUntil=null), unless includeExpired=true. No authentication required.",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of items to return",
            "schema": {
              "type": "integer",
              "default": 6,
              "minimum": 1,
              "maximum": 50
            }
          },
          {
            "name": "includeExpired",
            "in": "query",
            "description": "Whether to include expired featured items",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of featured items",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeaturedItemsResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "feat_2a3b4c5d",
                      "itemSlug": "awesome-productivity-tool",
                      "itemName": "Awesome Productivity Tool",
                      "itemIconUrl": "https://cdn.example.com/icons/productivity-tool.png",
                      "itemCategory": "productivity",
                      "itemDescription": "A powerful tool to boost your productivity and streamline workflows.",
                      "featuredOrder": 10,
                      "featuredUntil": "2024-03-15T10:30:00.123Z",
                      "isActive": true,
                      "featuredBy": "admin_1a2b3c4d",
                      "featuredAt": "2024-01-15T10:30:00.123Z",
                      "createdAt": "2024-01-15T10:30:00.123Z",
                      "updatedAt": "2024-01-15T10:30:00.123Z"
                    }
                  ],
                  "count": 1
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/verify-recaptcha": {
      "post": {
        "tags": ["Utilities"],
        "summary": "Verify reCAPTCHA token",
        "description": "Verifies a reCAPTCHA token with Google's reCAPTCHA API. Returns verification result with score (for v3), action, hostname, and timestamp. In development mode without RECAPTCHA_SECRET_KEY, always returns success=true. No authentication required.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RecaptchaRequest"
              },
              "example": {
                "token": "03AGdBq25SiZhbYhlXfzuVqWIMnOHGOxvSz1HiMUcE..."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "reCAPTCHA verification result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecaptchaResponse"
                },
                "examples": {
                  "success": {
                    "summary": "Successful verification (reCAPTCHA v3)",
                    "value": {
                      "success": true,
                      "score": 0.9,
                      "action": "submit_form",
                      "hostname": "example.com",
                      "challenge_ts": "2024-01-15T10:30:00.123Z",
                      "error_codes": null
                    }
                  },
                  "failure": {
                    "summary": "Failed verification",
                    "value": {
                      "success": false,
                      "score": null,
                      "action": null,
                      "hostname": "example.com",
                      "challenge_ts": "2024-01-15T10:30:00.123Z",
                      "error_codes": ["invalid-input-response", "timeout-or-duplicate"]
                    }
                  },
                  "development": {
                    "summary": "Development mode (no secret key)",
                    "value": {
                      "success": true
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid reCAPTCHA token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "ReCAPTCHA token is required"
                }
              }
            }
          },
          "500": {
            "description": "Server error - reCAPTCHA not configured or API request failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "not_configured": {
                    "summary": "reCAPTCHA not configured",
                    "value": {
                      "success": false,
                      "error": "ReCAPTCHA not configured"
                    }
                  },
                  "api_failed": {
                    "summary": "Google API request failed",
                    "value": {
                      "success": false,
                      "error": "Failed to verify ReCAPTCHA"
                    }
                  },
                  "verification_failed": {
                    "summary": "General verification failure",
                    "value": {
                      "success": false,
                      "error": "Verification failed"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/version": {
      "get": {
        "tags": ["Version"],
        "summary": "Get version information",
        "description": "Returns version information including git commit details (hash, date, message, author), repository info, current branch, and last sync timestamp. Attempts to sync repository before reading data. Includes cache headers (ETag, Last-Modified) for optimal performance. No authentication required.",
        "responses": {
          "200": {
            "description": "Version information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VersionInfo"
                },
                "example": {
                  "commit": "a1b2c3d",
                  "date": "2024-01-15T10:30:00.123Z",
                  "message": "âœ¨ feat: add version API with comprehensive error handling",
                  "author": "John Developer",
                  "repository": "https://github.com/ever-co/ever-works-website-template",
                  "lastSync": "2024-01-15T10:35:15.456Z",
                  "branch": "main"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found or no commits",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VersionErrorResponse"
                },
                "examples": {
                  "repository_not_found": {
                    "summary": "Git repository not found",
                    "value": {
                      "error": "Data repository not found",
                      "code": "REPOSITORY_NOT_FOUND",
                      "timestamp": "2024-01-15T10:30:00.123Z",
                      "details": "Git directory not found at: /path/to/repo"
                    }
                  },
                  "no_commits": {
                    "summary": "Repository exists but has no commits",
                    "value": {
                      "error": "No commits found in repository",
                      "code": "NO_COMMITS",
                      "timestamp": "2024-01-15T10:30:00.123Z",
                      "details": "Repository exists but contains no commits"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error - git error, validation error, or internal error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VersionErrorResponse"
                },
                "examples": {
                  "git_error": {
                    "summary": "Git operation failed",
                    "value": {
                      "error": "Failed to retrieve commit information",
                      "code": "GIT_ERROR",
                      "timestamp": "2024-01-15T10:30:00.123Z",
                      "details": "fatal: not a git repository"
                    }
                  },
                  "validation_error": {
                    "summary": "Invalid commit data",
                    "value": {
                      "error": "Invalid commit data",
                      "code": "VALIDATION_ERROR",
                      "timestamp": "2024-01-15T10:30:00.123Z",
                      "details": "Commit is missing required fields"
                    }
                  },
                  "internal_error": {
                    "summary": "Unexpected server error",
                    "value": {
                      "error": "Internal server error",
                      "code": "INTERNAL_ERROR",
                      "timestamp": "2024-01-15T10:30:00.123Z",
                      "details": "Unknown error occurred"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/admin/categories": {
      "get": {
        "tags": ["Admin - Categories"],
        "summary": "List categories (Admin)",
        "description": "Returns a paginated list of categories with optional filtering and sorting. Categories are loaded from Git repository. Supports sorting by name or id, with ascending/descending order. The includeInactive parameter is kept for backward compatibility but currently has no effect (all categories are considered active). Requires admin privileges.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "parameters": [
          {
            "name": "includeInactive",
            "in": "query",
            "description": "Whether to include inactive categories",
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "type": "string",
              "enum": ["name", "id"],
              "default": "name"
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "Sort order",
            "schema": {
              "type": "string",
              "enum": ["asc", "desc"],
              "default": "asc"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of categories",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoriesResponse"
                },
                "example": {
                  "success": true,
                  "categories": [
                    {
                      "id": "productivity-tools",
                      "name": "Productivity Tools"
                    },
                    {
                      "id": "development",
                      "name": "Development",
                      "count": 15
                    }
                  ],
                  "total": 2,
                  "page": 1,
                  "limit": 10,
                  "totalPages": 1
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Admin access required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Unauthorized. Admin access required."
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": ["Admin - Categories"],
        "summary": "Create category (Admin)",
        "description": "Creates a new category in the Git repository. Both id and name are required. Validates name length (2-50 chars) and id length (3-50 chars). Checks for duplicate names and IDs. Commits changes to Git repository. Requires admin privileges.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCategoryRequest"
              },
              "example": {
                "id": "productivity-tools",
                "name": "Productivity Tools"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Category created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateCategoryResponse"
                },
                "example": {
                  "success": true,
                  "category": {
                    "id": "productivity-tools",
                    "name": "Productivity Tools"
                  },
                  "message": "Category created successfully"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - validation error or missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "missing_name": {
                    "summary": "Category name is required",
                    "value": {
                      "success": false,
                      "error": "Category name is required"
                    }
                  },
                  "name_too_short": {
                    "summary": "Name too short",
                    "value": {
                      "success": false,
                      "error": "Category name must be at least 2 characters long"
                    }
                  },
                  "name_too_long": {
                    "summary": "Name too long",
                    "value": {
                      "success": false,
                      "error": "Category name must be no more than 50 characters long"
                    }
                  },
                  "id_too_short": {
                    "summary": "ID too short",
                    "value": {
                      "success": false,
                      "error": "Category ID must be at least 3 characters long"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Admin access required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Unauthorized. Admin access required."
                }
              }
            }
          },
          "409": {
            "description": "Category already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "duplicate_id": {
                    "summary": "Duplicate category ID",
                    "value": {
                      "success": false,
                      "error": "Category with ID \"productivity-tools\" already exists"
                    }
                  },
                  "duplicate_name": {
                    "summary": "Duplicate category name",
                    "value": {
                      "success": false,
                      "error": "Category with name \"Productivity Tools\" already exists"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/stripe/payment-methods/list": {
      "get": {
        "tags": ["Payments - Stripe"],
        "summary": "List payment methods",
        "description": "Returns a list of the current user's saved payment methods from Stripe",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of payment methods",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentMethodsResponse"
                },
                "examples": {
                  "with_methods": {
                    "summary": "User with payment methods",
                    "value": {
                      "success": true,
                      "data": [
                        {
                          "id": "pm_1234567890",
                          "type": "card",
                          "card": {
                            "brand": "visa",
                            "last4": "4242",
                            "funding": "credit",
                            "country": "US"
                          },
                          "billing_details": {
                            "name": "John Doe",
                            "email": "john@example.com"
                          },
                          "created": 1640995200,
                          "is_default": true
                        }
                      ],
                      "message": "Payment methods retrieved successfully"
                    }
                  },
                  "no_methods": {
                    "summary": "User with no payment methods",
                    "value": {
                      "success": true,
                      "data": [],
                      "message": "No payment methods found"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "description": "Customer not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Customer not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/items/{itemId}/comments": {
      "get": {
        "tags": ["Items & Content"],
        "summary": "Get item comments",
        "description": "Returns all comments for a specific item",
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "description": "The ID of the item",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of comments for the item",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommentsResponse"
                },
                "example": {
                  "success": true,
                  "comments": [
                    {
                      "id": "comment_123",
                      "content": "Great tool! Very useful.",
                      "rating": 5,
                      "userId": "user_123",
                      "itemId": "awesome-productivity-tool",
                      "createdAt": "2024-01-15T10:30:00.123Z",
                      "updatedAt": "2024-01-15T10:30:00.123Z",
                      "user": {
                        "id": "user_123",
                        "name": "John Doe",
                        "email": "john@example.com"
                      }
                    }
                  ]
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": ["Items & Content"],
        "summary": "Create item comment",
        "description": "Creates a new comment and rating for an item. Requires authentication.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "description": "The ID of the item",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCommentRequest"
              },
              "example": {
                "content": "This is an excellent tool! Highly recommended.",
                "rating": 5
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comment created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateCommentResponse"
                },
                "example": {
                  "success": true,
                  "comment": {
                    "id": "comment_456",
                    "content": "This is an excellent tool! Highly recommended.",
                    "rating": 5,
                    "userId": "user_123",
                    "itemId": "awesome-productivity-tool",
                    "createdAt": "2024-01-15T10:30:00.123Z",
                    "updatedAt": "2024-01-15T10:30:00.123Z",
                    "user": {
                      "id": "user_123",
                      "name": "John Doe",
                      "email": "john@example.com"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "missing_content": {
                    "summary": "Missing content",
                    "value": {
                      "success": false,
                      "error": "Content is required"
                    }
                  },
                  "invalid_rating": {
                    "summary": "Invalid rating",
                    "value": {
                      "success": false,
                      "error": "Rating must be between 1 and 5"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "description": "Client profile not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Client profile not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/items/{itemId}/votes": {
      "get": {
        "tags": ["Items & Content"],
        "summary": "Get item votes",
        "description": "Returns vote count and current user's vote status for an item",
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "description": "The ID of the item",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vote information for the item",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VoteResponse"
                },
                "examples": {
                  "with_user_vote": {
                    "summary": "User has voted",
                    "value": {
                      "success": true,
                      "count": 42,
                      "userVote": "up"
                    }
                  },
                  "no_user_vote": {
                    "summary": "User hasn't voted",
                    "value": {
                      "success": true,
                      "count": 42,
                      "userVote": null
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": ["Items & Content"],
        "summary": "Vote on item",
        "description": "Creates or updates a vote for an item. Replaces any existing vote by the user.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "description": "The ID of the item",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VoteRequest"
              },
              "example": {
                "type": "up"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Vote recorded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VoteResponse"
                },
                "example": {
                  "success": true,
                  "count": 43,
                  "userVote": "up"
                }
              }
            }
          },
          "400": {
            "description": "Invalid vote type",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Invalid vote type. Must be 'up' or 'down'"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "description": "Client profile not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Client profile not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "delete": {
        "tags": ["Items & Content"],
        "summary": "Remove vote from item",
        "description": "Removes the current user's vote from an item",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "description": "The ID of the item",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Vote removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VoteResponse"
                },
                "example": {
                  "success": true,
                  "count": 42,
                  "userVote": null
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "description": "Client profile not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Client profile not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/admin/users": {
      "get": {
        "tags": ["Admin - Users"],
        "summary": "List users (Admin)",
        "description": "Returns a paginated list of users with filtering and sorting options. Requires admin privileges.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Search term for name, username, or email",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "role",
            "in": "query",
            "description": "Filter by user role",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Filter by user status",
            "schema": {
              "type": "string",
              "enum": ["active", "inactive"]
            }
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "type": "string",
              "enum": ["name", "username", "email", "role", "created_at"],
              "default": "created_at"
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "Sort order",
            "schema": {
              "type": "string",
              "enum": ["asc", "desc"],
              "default": "desc"
            }
          },
          {
            "name": "includeInactive",
            "in": "query",
            "description": "Whether to include inactive users",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsersResponse"
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": "user_2a3b4c5d",
                      "email": "john.doe@example.com",
                      "username": "johndoe",
                      "name": "John Doe",
                      "title": "Senior Developer",
                      "avatar": "https://cdn.example.com/avatars/johndoe.jpg",
                      "role": "admin",
                      "roleName": "Administrator",
                      "status": "active",
                      "created_by": "admin_1a2b3c4d",
                      "created_at": "2024-01-15T10:30:00.123Z",
                      "updated_at": "2024-01-15T10:30:00.123Z"
                    }
                  ],
                  "total": 1,
                  "page": 1,
                  "limit": 10,
                  "totalPages": 1
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "invalid_status": {
                    "summary": "Invalid status parameter",
                    "value": {
                      "success": false,
                      "error": "Invalid status parameter"
                    }
                  },
                  "invalid_sort": {
                    "summary": "Invalid sortBy parameter",
                    "value": {
                      "success": false,
                      "error": "Invalid sortBy parameter"
                    }
                  },
                  "invalid_sort_order": {
                    "summary": "Invalid sortOrder parameter",
                    "value": {
                      "success": false,
                      "error": "Invalid sortOrder parameter"
                    }
                  },
                  "search_too_long": {
                    "summary": "Search parameter too long",
                    "value": {
                      "success": false,
                      "error": "Search parameter too long"
                    }
                  },
                  "role_too_long": {
                    "summary": "Role parameter too long",
                    "value": {
                      "success": false,
                      "error": "Role parameter too long"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "description": "Forbidden - Admin access required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Forbidden"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": ["Admin - Users"],
        "summary": "Create user (Admin)",
        "description": "Creates a new user account with comprehensive validation. Validates email format, username format (3-30 chars, alphanumeric + dash/underscore), name length (2-100 chars), password strength (min 8 chars), and role existence. Requires admin privileges.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserRequest"
              },
              "example": {
                "username": "johndoe",
                "email": "john.doe@example.com",
                "name": "John Doe",
                "title": "Senior Developer",
                "avatar": "https://cdn.example.com/avatars/johndoe.jpg",
                "role": "admin",
                "password": "SecurePass123!"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateUserResponse"
                },
                "example": {
                  "success": true,
                  "user": {
                    "id": "user_2a3b4c5d",
                    "email": "john.doe@example.com",
                    "username": "johndoe",
                    "name": "John Doe",
                    "title": "Senior Developer",
                    "avatar": "https://cdn.example.com/avatars/johndoe.jpg",
                    "role": "admin",
                    "roleName": "Administrator",
                    "status": "active",
                    "created_by": "admin_1a2b3c4d",
                    "created_at": "2024-01-15T10:30:00.123Z",
                    "updated_at": "2024-01-15T10:30:00.123Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error - invalid or missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "missing_fields": {
                    "summary": "Missing required fields",
                    "value": {
                      "success": false,
                      "error": "Missing required fields: username, email, name, password, and role are required"
                    }
                  },
                  "invalid_email": {
                    "summary": "Invalid email format",
                    "value": {
                      "success": false,
                      "error": "Invalid email format"
                    }
                  },
                  "invalid_username": {
                    "summary": "Invalid username format",
                    "value": {
                      "success": false,
                      "error": "Username must be 3-30 characters and contain only letters, numbers, dashes, and underscores"
                    }
                  },
                  "invalid_name": {
                    "summary": "Invalid name length",
                    "value": {
                      "success": false,
                      "error": "Name must be between 2 and 100 characters"
                    }
                  },
                  "weak_password": {
                    "summary": "Password too weak",
                    "value": {
                      "success": false,
                      "error": "Password must be at least 8 characters long"
                    }
                  },
                  "invalid_role": {
                    "summary": "Role does not exist",
                    "value": {
                      "success": false,
                      "error": "Invalid role"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "description": "Forbidden - Admin access required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Forbidden"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/admin/items": {
      "get": {
        "tags": ["Admin - Items"],
        "summary": "List items (Admin)",
        "description": "Returns a paginated list of items with filtering options. Items are loaded from Git repository. Supports filtering by status (draft/pending/approved/rejected), category, and tag. Status validation ensures only valid values are accepted. Requires admin privileges.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          },
          {
            "name": "category",
            "in": "query",
            "description": "Filter by category",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tag",
            "in": "query",
            "description": "Filter by tag",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Filter by item status",
            "schema": {
              "type": "string",
              "enum": ["draft", "pending", "approved", "rejected"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of items",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ItemsResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "description": "Forbidden - Admin access required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Unauthorized. Admin access required."
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      },
      "post": {
        "tags": ["Admin - Items"],
        "summary": "Create item (Admin)",
        "description": "Creates a new item in the Git repository. Validates required fields (id, name, slug, description, source_url), checks for duplicate ID and slug, validates slug format (lowercase, hyphens only), and validates URL format. Requires admin privileges.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateItemRequest"
              },
              "example": {
                "id": "awesome-productivity-tool",
                "name": "Awesome Productivity Tool",
                "slug": "awesome-productivity-tool",
                "description": "A comprehensive productivity tool that helps teams collaborate effectively and manage their tasks efficiently.",
                "source_url": "https://github.com/awesome/productivity-tool",
                "category": ["productivity", "collaboration"],
                "tags": ["productivity", "collaboration", "task-management"],
                "featured": true,
                "icon_url": "https://cdn.example.com/icons/productivity-tool.png",
                "status": "draft"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Item created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateItemResponse"
                },
                "example": {
                  "success": true,
                  "item": {
                    "id": "awesome-productivity-tool",
                    "name": "Awesome Productivity Tool",
                    "slug": "awesome-productivity-tool",
                    "description": "A comprehensive productivity tool that helps teams collaborate effectively and manage their tasks efficiently.",
                    "source_url": "https://github.com/awesome/productivity-tool",
                    "category": ["productivity", "collaboration"],
                    "tags": ["productivity", "collaboration", "task-management"],
                    "featured": true,
                    "icon_url": "https://cdn.example.com/icons/productivity-tool.png",
                    "updated_at": "2024-01-15T10:30:00.123Z",
                    "status": "draft",
                    "submitted_by": null,
                    "submitted_at": null,
                    "reviewed_by": null,
                    "reviewed_at": null,
                    "review_notes": null
                  },
                  "message": "Item created successfully"
                }
              }
            }
          },
          "400": {
            "description": "Validation error - invalid or missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Item ID, name, slug, description, and source URL are required"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "409": {
            "description": "Conflict - duplicate ID or slug",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "duplicate_id": {
                    "summary": "Duplicate item ID",
                    "value": {
                      "success": false,
                      "error": "Item with ID 'awesome-productivity-tool' already exists"
                    }
                  },
                  "duplicate_slug": {
                    "summary": "Duplicate item slug",
                    "value": {
                      "success": false,
                      "error": "Item with slug 'awesome-productivity-tool' already exists"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/admin/roles": {
      "get": {
        "tags": ["Admin - Roles"],
        "summary": "List roles (Admin)",
        "description": "Returns a paginated list of roles. Roles are loaded from Git repository. Supports pagination with page and limit parameters. Requires admin privileges.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Roles retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RolesResponse"
                },
                "example": {
                  "success": true,
                  "roles": [
                    {
                      "id": "admin",
                      "name": "Administrator",
                      "description": "Full system access with all administrative privileges",
                      "status": "active",
                      "isAdmin": true,
                      "permissions": []
                    },
                    {
                      "id": "user",
                      "name": "User",
                      "description": "Standard user with basic access permissions",
                      "status": "active",
                      "isAdmin": false,
                      "permissions": []
                    }
                  ],
                  "total": 2,
                  "page": 1,
                  "limit": 10,
                  "totalPages": 1
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Failed to fetch roles"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Admin - Roles"],
        "summary": "Create role (Admin)",
        "description": "Creates a new role in the Git repository. Validates required fields (name, description), generates stable ID from name, validates name length (3-100 chars) and description length (max 500 chars), and checks for duplicate names. Requires admin privileges.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRoleRequest"
              },
              "example": {
                "name": "Content Manager",
                "description": "Manages content creation and publication with moderate administrative privileges",
                "status": "active",
                "isAdmin": false
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Role created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateRoleResponse"
                },
                "example": {
                  "success": true,
                  "role": {
                    "id": "content-manager",
                    "name": "Content Manager",
                    "description": "Manages content creation and publication with moderate administrative privileges",
                    "status": "active",
                    "isAdmin": false,
                    "permissions": []
                  },
                  "message": "Role created successfully"
                }
              }
            }
          },
          "400": {
            "description": "Validation error - invalid or missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "missing_fields": {
                    "summary": "Missing required fields",
                    "value": {
                      "success": false,
                      "error": "Missing required fields: name, description"
                    }
                  },
                  "invalid_name_length": {
                    "summary": "Invalid name length",
                    "value": {
                      "success": false,
                      "error": "Role name must be between 3 and 100 characters"
                    }
                  },
                  "invalid_description_length": {
                    "summary": "Description too long",
                    "value": {
                      "success": false,
                      "error": "Role description must be at most 500 characters"
                    }
                  },
                  "invalid_id": {
                    "summary": "Unable to generate valid ID",
                    "value": {
                      "success": false,
                      "error": "Unable to derive a valid role ID from name"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "409": {
            "description": "Conflict - role with similar name already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Role with similar name already exists"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Failed to create role"
                }
              }
            }
          }
        }
      }
    },
    "/api/stripe/checkout": {
      "post": {
        "tags": ["Payments - Stripe"],
        "summary": "Create checkout session",
        "description": "Creates a Stripe checkout session for payment processing",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CheckoutRequest"
              },
              "example": {
                "priceId": "price_1234567890",
                "mode": "subscription",
                "trialPeriodDays": 7,
                "billingInterval": "month",
                "successUrl": "https://example.com/success",
                "cancelUrl": "https://example.com/cancel",
                "metadata": {
                  "plan": "standard"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Checkout session created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckoutResponse"
                },
                "example": {
                  "success": true,
                  "sessionId": "cs_1234567890",
                  "url": "https://checkout.stripe.com/pay/cs_1234567890"
                }
              }
            }
          },
          "400": {
            "description": "Failed to create customer or invalid parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Failed to create customer",
                  "message": "Unable to create Stripe customer"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/stripe/subscriptions": {
      "get": {
        "tags": ["Payments - Stripe"],
        "summary": "List user subscriptions",
        "description": "Returns all subscriptions for the current user",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of user subscriptions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionsResponse"
                },
                "example": {
                  "success": true,
                  "subscriptions": [
                    {
                      "id": "sub_1234567890",
                      "status": "active",
                      "current_period_start": 1640995200,
                      "current_period_end": 1643673600,
                      "plan": {
                        "id": "price_1234567890",
                        "nickname": "Standard Plan",
                        "amount": 1900,
                        "currency": "usd",
                        "interval": "month"
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/auth/change-password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Change user password",
        "description": "Changes the current user's password. Requires authentication and current password verification. Rate limited to 5 attempts per 15 minutes per IP address. Not available for OAuth-only accounts (users without password). Sends confirmation email after successful change.",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              },
              "example": {
                "currentPassword": "oldPassword123!",
                "newPassword": "newPassword456@",
                "confirmPassword": "newPassword456@"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password changed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                },
                "example": {
                  "success": true,
                  "message": "Password changed successfully"
                }
              }
            }
          },
          "400": {
            "description": "Validation error, incorrect current password, or invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseWithDetails"
                },
                "examples": {
                  "validation_error": {
                    "summary": "Password validation failed",
                    "value": {
                      "success": false,
                      "error": "Invalid input data",
                      "details": [
                        {
                          "code": "too_small",
                          "minimum": 8,
                          "type": "string",
                          "inclusive": true,
                          "exact": false,
                          "message": "Password must be at least 8 characters",
                          "path": ["newPassword"]
                        }
                      ]
                    }
                  },
                  "incorrect_password": {
                    "summary": "Current password incorrect",
                    "value": {
                      "success": false,
                      "error": "Current password is incorrect"
                    }
                  },
                  "password_mismatch": {
                    "summary": "Passwords don't match",
                    "value": {
                      "success": false,
                      "error": "Passwords don't match"
                    }
                  },
                  "oauth_user": {
                    "summary": "OAuth user without password",
                    "value": {
                      "success": false,
                      "error": "Password change not available for OAuth accounts. Please contact support."
                    }
                  },
                  "same_password": {
                    "summary": "New password same as current",
                    "value": {
                      "success": false,
                      "error": "New password must be different from current password"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "description": "User not found in database",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "User not found"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "error": "Too many password change attempts. Please try again later.",
                  "retryAfter": 900
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/lemonsqueezy/checkout": {
      "post": {
        "tags": ["Payments - LemonSqueezy"],
        "summary": "Create LemonSqueezy checkout",
        "description": "Creates a LemonSqueezy checkout session for payment processing",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LemonSqueezyCheckoutRequest"
              },
              "example": {
                "variantId": "123456",
                "customPrice": 1900,
                "metadata": {
                  "plan": "standard",
                  "userId": "user_123"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Checkout URL created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LemonSqueezyCheckoutResponse"
                },
                "example": {
                  "success": true,
                  "checkoutUrl": "https://checkout.lemonsqueezy.com/checkout/custom/abc123"
                }
              }
            }
          },
          "400": {
            "description": "Validation error or invalid parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "validation_error": {
                    "summary": "Invalid request body",
                    "value": {
                      "success": false,
                      "error": "VALIDATION_ERROR",
                      "message": "variantId is required"
                    }
                  },
                  "invalid_json": {
                    "summary": "Invalid JSON",
                    "value": {
                      "success": false,
                      "error": "VALIDATION_ERROR",
                      "message": "Invalid JSON in request body"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/lemonsqueezy/list": {
      "get": {
        "tags": ["Payments - LemonSqueezy"],
        "summary": "List LemonSqueezy subscriptions",
        "description": "Returns a list of LemonSqueezy subscriptions with filtering options",
        "security": [
          {
            "sessionAuth": []
          }
        ],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "description": "Filter by subscription status",
            "schema": {
              "type": "string",
              "enum": ["active", "cancelled", "expired", "on_trial", "paused", "past_due", "unpaid"]
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of items to return",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "name": "customerEmail",
            "in": "query",
            "description": "Filter by customer email",
            "schema": {
              "type": "string",
              "format": "email"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of LemonSqueezy subscriptions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LemonSqueezySubscriptionsResponse"
                },
                "example": {
                  "success": true,
                  "subscriptions": [
                    {
                      "id": "123456",
                      "status": "active",
                      "customer_email": "user@example.com",
                      "product_name": "Standard Plan",
                      "variant_name": "Monthly",
                      "created_at": "2024-01-15T10:30:00Z",
                      "renews_at": "2024-02-15T10:30:00Z"
                    }
                  ],
                  "meta": {
                    "page": 1,
                    "per_page": 50,
                    "total": 1
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "sessionAuth": {
        "type": "apiKey",
        "in": "cookie",
        "name": "next-auth.session-token",
        "description": "Session-based authentication using NextAuth.js"
      }
    },
    "schemas": {
      "SafeUser": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique user identifier"
          },
          "name": {
            "type": "string",
            "nullable": true,
            "description": "User's display name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "nullable": true,
            "description": "User's email address"
          },
          "image": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "URL to user's profile image"
          },
          "provider": {
            "type": "string",
            "nullable": true,
            "description": "Authentication provider used"
          },
          "isAdmin": {
            "type": "boolean",
            "description": "Whether the user has admin privileges"
          }
        },
        "required": ["id", "isAdmin"]
      },
      "Favorite": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique favorite identifier"
          },
          "userId": {
            "type": "string",
            "description": "ID of the user who favorited the item"
          },
          "itemSlug": {
            "type": "string",
            "description": "Slug identifier of the favorited item"
          },
          "itemName": {
            "type": "string",
            "description": "Name of the favorited item"
          },
          "itemIconUrl": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "URL to the item's icon"
          },
          "itemCategory": {
            "type": "string",
            "nullable": true,
            "description": "Category of the favorited item"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the favorite was created"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the favorite was last updated"
          }
        },
        "required": ["id", "userId", "itemSlug", "itemName", "createdAt", "updatedAt"]
      },
      "FeaturedItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique featured item identifier"
          },
          "itemSlug": {
            "type": "string",
            "description": "Slug identifier of the featured item"
          },
          "itemName": {
            "type": "string",
            "description": "Name of the featured item"
          },
          "itemIconUrl": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "URL to the item's icon"
          },
          "itemCategory": {
            "type": "string",
            "nullable": true,
            "description": "Category of the featured item"
          },
          "itemDescription": {
            "type": "string",
            "nullable": true,
            "description": "Description of the featured item"
          },
          "featuredOrder": {
            "type": "integer",
            "description": "Display order for featured items (higher numbers first)"
          },
          "featuredUntil": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "When the featured status expires (null means no expiration)"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the featured item is currently active"
          },
          "featuredBy": {
            "type": "string",
            "description": "ID of the admin user who featured this item"
          },
          "featuredAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the item was featured"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the featured item record was created"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the featured item record was last updated"
          }
        },
        "required": ["id", "itemSlug", "itemName", "featuredOrder", "isActive", "featuredBy", "featuredAt", "createdAt", "updatedAt"]
      },
      "AddFavoriteRequest": {
        "type": "object",
        "properties": {
          "itemSlug": {
            "type": "string",
            "minLength": 1,
            "description": "Slug identifier of the item to favorite"
          },
          "itemName": {
            "type": "string",
            "minLength": 1,
            "description": "Name of the item to favorite"
          },
          "itemIconUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL to the item's icon"
          },
          "itemCategory": {
            "type": "string",
            "description": "Category of the item to favorite"
          }
        },
        "required": ["itemSlug", "itemName"]
      },
      "FavoritesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "favorites": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Favorite"
            }
          }
        },
        "required": ["success", "favorites"]
      },
      "AddFavoriteResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "favorite": {
            "$ref": "#/components/schemas/Favorite"
          }
        },
        "required": ["success", "favorite"]
      },
      "FeaturedItemsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FeaturedItem"
            }
          },
          "count": {
            "type": "integer",
            "description": "Number of items returned"
          }
        },
        "required": ["success", "data", "count"]
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "description": "Success message"
          }
        },
        "required": ["success"]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string",
            "description": "Error message"
          },
          "details": {
            "type": "string",
            "description": "Additional error details"
          }
        },
        "required": ["success", "error"]
      },
      "ErrorResponseWithDetails": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message"
          },
          "details": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Error code"
                },
                "message": {
                  "type": "string",
                  "description": "Detailed error message"
                },
                "path": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Field path where error occurred"
                }
              }
            },
            "description": "Detailed validation errors (when applicable)"
          }
        },
        "required": ["error"]
      },
      "RecaptchaRequest": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "reCAPTCHA token from the client"
          }
        },
        "required": ["token"]
      },
      "RecaptchaResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "Whether the reCAPTCHA verification was successful"
          },
          "score": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Score for reCAPTCHA v3 (0.0 to 1.0)"
          },
          "action": {
            "type": "string",
            "description": "Action name for reCAPTCHA v3"
          },
          "hostname": {
            "type": "string",
            "description": "Hostname of the site where the reCAPTCHA was solved"
          },
          "challenge_ts": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the challenge"
          },
          "error_codes": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Error codes if verification failed"
          }
        },
        "required": ["success"]
      },
      "VersionInfo": {
        "type": "object",
        "properties": {
          "commit": {
            "type": "string",
            "description": "Short commit hash"
          },
          "date": {
            "type": "string",
            "format": "date-time",
            "description": "Commit date"
          },
          "message": {
            "type": "string",
            "description": "Commit message"
          },
          "author": {
            "type": "string",
            "description": "Commit author"
          },
          "repository": {
            "type": "string",
            "description": "Repository URL or identifier"
          },
          "lastSync": {
            "type": "string",
            "format": "date-time",
            "description": "Last synchronization timestamp"
          },
          "branch": {
            "type": "string",
            "description": "Current branch name"
          }
        },
        "required": ["commit", "date", "message", "author", "repository", "lastSync", "branch"]
      },
      "VersionErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message"
          },
          "code": {
            "type": "string",
            "enum": ["REPOSITORY_NOT_FOUND", "NO_COMMITS", "SYNC_FAILED", "GIT_ERROR", "INTERNAL_ERROR", "VALIDATION_ERROR"],
            "description": "Error code"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Error timestamp"
          },
          "details": {
            "type": "string",
            "description": "Additional error details"
          }
        },
        "required": ["error", "code", "timestamp"]
      },
      "Category": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique category identifier"
          },
          "name": {
            "type": "string",
            "description": "Category name"
          },
          "count": {
            "type": "integer",
            "description": "Number of items in this category (optional, only in some contexts)"
          },
          "isInactive": {
            "type": "boolean",
            "description": "Whether the category is inactive (optional, only in some contexts)"
          }
        },
        "required": ["id", "name"]
      },
      "CreateCategoryRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 3,
            "maxLength": 50,
            "description": "Category identifier (required, must be 3-50 characters)"
          },
          "name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 50,
            "description": "Category name (required, must be 2-50 characters)"
          }
        },
        "required": ["id", "name"]
      },
      "CategoriesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "categories": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Category"
            }
          },
          "total": {
            "type": "integer",
            "description": "Total number of categories"
          },
          "page": {
            "type": "integer",
            "description": "Current page number"
          },
          "limit": {
            "type": "integer",
            "description": "Number of items per page"
          },
          "totalPages": {
            "type": "integer",
            "description": "Total number of pages"
          }
        },
        "required": ["success", "categories", "total", "page", "limit", "totalPages"]
      },
      "CreateCategoryResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "category": {
            "$ref": "#/components/schemas/Category"
          },
          "message": {
            "type": "string",
            "description": "Success message"
          }
        },
        "required": ["success", "category"]
      },
      "PaymentMethod": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Stripe payment method ID"
          },
          "type": {
            "type": "string",
            "description": "Payment method type (e.g., 'card')"
          },
          "card": {
            "type": "object",
            "properties": {
              "brand": {
                "type": "string",
                "description": "Card brand (visa, mastercard, etc.)"
              },
              "last4": {
                "type": "string",
                "description": "Last 4 digits of the card"
              },
              "funding": {
                "type": "string",
                "description": "Card funding type (credit, debit, etc.)"
              },
              "country": {
                "type": "string",
                "description": "Country code where the card was issued"
              }
            }
          },
          "billing_details": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "nullable": true,
                "description": "Cardholder name"
              },
              "email": {
                "type": "string",
                "format": "email",
                "nullable": true,
                "description": "Cardholder email"
              }
            }
          },
          "created": {
            "type": "integer",
            "description": "Unix timestamp when the payment method was created"
          },
          "is_default": {
            "type": "boolean",
            "description": "Whether this is the default payment method"
          }
        },
        "required": ["id", "type", "created"]
      },
      "PaymentMethodsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaymentMethod"
            }
          },
          "message": {
            "type": "string",
            "description": "Response message"
          }
        },
        "required": ["success", "data"]
      },
      "Comment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique comment identifier"
          },
          "content": {
            "type": "string",
            "description": "Comment content"
          },
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "description": "Rating given with the comment (1-5 stars)"
          },
          "userId": {
            "type": "string",
            "description": "ID of the user who created the comment"
          },
          "itemId": {
            "type": "string",
            "description": "ID of the item being commented on"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the comment was created"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "When the comment was last updated"
          }
        },
        "required": ["id", "content", "rating", "userId", "itemId", "createdAt"]
      },
      "CommentWithUser": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Comment"
          },
          {
            "type": "object",
            "properties": {
              "user": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "User ID"
                  },
                  "name": {
                    "type": "string",
                    "description": "User display name"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "User email"
                  },
                  "avatar": {
                    "type": "string",
                    "format": "uri",
                    "nullable": true,
                    "description": "User avatar URL"
                  }
                },
                "required": ["id", "name", "email"]
              }
            },
            "required": ["user"]
          }
        ]
      },
      "CreateCommentRequest": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "minLength": 1,
            "description": "Comment content (required, non-empty)"
          },
          "rating": {
            "type": "integer",
            "minimum": 1,
            "maximum": 5,
            "description": "Rating for the item (1-5 stars)"
          }
        },
        "required": ["content", "rating"]
      },
      "CommentsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "comments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CommentWithUser"
            },
            "description": "Array of comments with user information"
          }
        },
        "required": ["success", "comments"]
      },
      "CreateCommentResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "comment": {
            "$ref": "#/components/schemas/CommentWithUser"
          }
        },
        "required": ["success", "comment"]
      },
      "VoteRequest": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["up", "down"],
            "description": "Vote type: 'up' for upvote, 'down' for downvote"
          }
        },
        "required": ["type"]
      },
      "VoteResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "count": {
            "type": "integer",
            "description": "Total vote count for the item (upvotes - downvotes)"
          },
          "userVote": {
            "type": "string",
            "enum": ["up", "down"],
            "nullable": true,
            "description": "Current user's vote status: 'up', 'down', or null if not voted"
          }
        },
        "required": ["success", "count", "userVote"]
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique user identifier"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User's email address"
          },
          "username": {
            "type": "string",
            "nullable": true,
            "description": "User's username (optional)"
          },
          "name": {
            "type": "string",
            "nullable": true,
            "description": "User's display name (optional)"
          },
          "title": {
            "type": "string",
            "nullable": true,
            "description": "User's job title (optional)"
          },
          "avatar": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "User's avatar URL (optional)"
          },
          "role": {
            "type": "string",
            "nullable": true,
            "description": "User's role ID (optional)"
          },
          "roleName": {
            "type": "string",
            "nullable": true,
            "description": "User's role display name (optional)"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive"],
            "nullable": true,
            "description": "User's account status (optional)"
          },
          "created_by": {
            "type": "string",
            "nullable": true,
            "description": "ID of user who created this account (optional)"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the user was created"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the user was last updated"
          }
        },
        "required": ["id", "email", "created_at", "updated_at"]
      },
      "UsersResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/User"
            },
            "description": "Array of user objects"
          },
          "total": {
            "type": "integer",
            "description": "Total number of users"
          },
          "page": {
            "type": "integer",
            "description": "Current page number"
          },
          "limit": {
            "type": "integer",
            "description": "Items per page"
          },
          "totalPages": {
            "type": "integer",
            "description": "Total number of pages"
          }
        },
        "required": ["success", "data", "total", "page", "limit", "totalPages"]
      },
      "CreateUserRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "minLength": 3,
            "maxLength": 30,
            "pattern": "^[a-zA-Z0-9_-]+$",
            "description": "Username (3-30 characters, alphanumeric + dash/underscore)"
          },
          "email": {
            "type": "string",
            "format": "email",
            "maxLength": 255,
            "description": "User's email address"
          },
          "name": {
            "type": "string",
            "minLength": 2,
            "maxLength": 100,
            "description": "User's display name (2-100 characters)"
          },
          "title": {
            "type": "string",
            "maxLength": 100,
            "description": "User's job title (optional, max 100 characters)"
          },
          "avatar": {
            "type": "string",
            "format": "uri",
            "maxLength": 500,
            "description": "User's avatar URL (optional, max 500 characters)"
          },
          "role": {
            "type": "string",
            "minLength": 1,
            "description": "User's role ID (must exist in system)"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "description": "User's password (minimum 8 characters)"
          }
        },
        "required": ["username", "email", "name", "role", "password"]
      },
      "CreateUserResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "user": {
            "$ref": "#/components/schemas/User"
          }
        },
        "required": ["success", "user"]
      },
      "Item": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique item identifier"
          },
          "name": {
            "type": "string",
            "description": "Item name"
          },
          "slug": {
            "type": "string",
            "description": "URL-friendly item identifier"
          },
          "description": {
            "type": "string",
            "description": "Item description"
          },
          "source_url": {
            "type": "string",
            "format": "uri",
            "description": "URL to the item's source"
          },
          "category": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ],
            "description": "Item category (can be string or array of strings)"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Item tags"
          },
          "featured": {
            "type": "boolean",
            "description": "Whether the item is featured (optional)"
          },
          "icon_url": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "URL to the item's icon (optional)"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the item was last updated"
          },
          "status": {
            "type": "string",
            "enum": ["draft", "pending", "approved", "rejected"],
            "description": "Item status"
          },
          "submitted_by": {
            "type": "string",
            "nullable": true,
            "description": "ID of user who submitted the item (optional)"
          },
          "submitted_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "When the item was submitted (optional)"
          },
          "reviewed_by": {
            "type": "string",
            "nullable": true,
            "description": "ID of user who reviewed the item (optional)"
          },
          "reviewed_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "When the item was reviewed (optional)"
          },
          "review_notes": {
            "type": "string",
            "nullable": true,
            "description": "Review notes (optional)"
          }
        },
        "required": ["id", "name", "slug", "description", "source_url", "category", "tags", "updated_at", "status"]
      },
      "ItemsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Item"
            },
            "description": "Array of item objects"
          },
          "total": {
            "type": "integer",
            "description": "Total number of items"
          },
          "page": {
            "type": "integer",
            "description": "Current page number"
          },
          "limit": {
            "type": "integer",
            "description": "Items per page"
          },
          "totalPages": {
            "type": "integer",
            "description": "Total number of pages"
          }
        },
        "required": ["success", "items", "total", "page", "limit", "totalPages"]
      },
      "CreateItemRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 3,
            "maxLength": 50,
            "description": "Unique item identifier (required, 3-50 characters)"
          },
          "name": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "description": "Item name (required, 3-100 characters)"
          },
          "slug": {
            "type": "string",
            "minLength": 3,
            "maxLength": 50,
            "pattern": "^[a-z0-9-]+$",
            "description": "URL-friendly identifier (required, lowercase letters, numbers, hyphens only)"
          },
          "description": {
            "type": "string",
            "minLength": 10,
            "maxLength": 500,
            "description": "Item description (required, 10-500 characters)"
          },
          "source_url": {
            "type": "string",
            "format": "uri",
            "description": "URL to the item's source (required, valid URL format)"
          },
          "category": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ],
            "description": "Item category (optional, can be string or array of strings)"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Item tags (optional, array of strings)"
          },
          "featured": {
            "type": "boolean",
            "description": "Whether the item is featured (optional, defaults to false)"
          },
          "icon_url": {
            "type": "string",
            "format": "uri",
            "description": "URL to the item's icon (optional)"
          },
          "status": {
            "type": "string",
            "enum": ["draft", "pending", "approved", "rejected"],
            "description": "Item status (optional, defaults to 'draft')"
          }
        },
        "required": ["id", "name", "slug", "description", "source_url"]
      },
      "CreateItemResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "item": {
            "$ref": "#/components/schemas/Item"
          },
          "message": {
            "type": "string",
            "description": "Success message"
          }
        },
        "required": ["success", "item", "message"]
      },
      "Role": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique role identifier (auto-generated from name)"
          },
          "name": {
            "type": "string",
            "description": "Role display name"
          },
          "description": {
            "type": "string",
            "description": "Role description"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive"],
            "description": "Role status"
          },
          "isAdmin": {
            "type": "boolean",
            "description": "Whether this role has admin privileges"
          },
          "permissions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Array of permission strings (currently empty)"
          }
        },
        "required": ["id", "name", "description", "status", "isAdmin", "permissions"]
      },
      "RolesResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "roles": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Role"
            },
            "description": "Array of role objects"
          },
          "total": {
            "type": "integer",
            "description": "Total number of roles"
          },
          "page": {
            "type": "integer",
            "description": "Current page number"
          },
          "limit": {
            "type": "integer",
            "description": "Items per page"
          },
          "totalPages": {
            "type": "integer",
            "description": "Total number of pages"
          }
        },
        "required": ["success", "roles", "total", "page", "limit", "totalPages"]
      },
      "CreateRoleRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100,
            "description": "Role name (required, 3-100 characters)"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "description": "Role description (required, max 500 characters)"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive"],
            "description": "Role status (optional, defaults to 'active')"
          },
          "isAdmin": {
            "type": "boolean",
            "description": "Whether this role has admin privileges (optional, defaults to false)"
          }
        },
        "required": ["name", "description"]
      },
      "CreateRoleResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "role": {
            "$ref": "#/components/schemas/Role"
          },
          "message": {
            "type": "string",
            "description": "Success message"
          }
        },
        "required": ["success", "role", "message"]
      },
      "CheckoutRequest": {
        "type": "object",
        "properties": {
          "priceId": {
            "type": "string",
            "description": "Stripe price ID"
          },
          "mode": {
            "type": "string",
            "enum": ["payment", "subscription", "setup"],
            "default": "subscription",
            "description": "Checkout mode"
          },
          "trialPeriodDays": {
            "type": "integer",
            "minimum": 0,
            "default": 0,
            "description": "Trial period in days for subscriptions"
          },
          "billingInterval": {
            "type": "string",
            "enum": ["month", "year"],
            "default": "month",
            "description": "Billing interval for subscriptions"
          },
          "successUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL to redirect after successful payment"
          },
          "cancelUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL to redirect after cancelled payment"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Additional metadata for the checkout session"
          }
        },
        "required": ["priceId"]
      },
      "CheckoutResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "sessionId": {
            "type": "string",
            "description": "Stripe checkout session ID"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Checkout session URL"
          }
        },
        "required": ["success", "sessionId", "url"]
      },
      "Subscription": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Stripe subscription ID"
          },
          "status": {
            "type": "string",
            "enum": ["active", "canceled", "incomplete", "incomplete_expired", "past_due", "trialing", "unpaid"],
            "description": "Subscription status"
          },
          "current_period_start": {
            "type": "integer",
            "description": "Unix timestamp of current period start"
          },
          "current_period_end": {
            "type": "integer",
            "description": "Unix timestamp of current period end"
          },
          "plan": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Stripe price ID"
              },
              "nickname": {
                "type": "string",
                "description": "Plan display name"
              },
              "amount": {
                "type": "integer",
                "description": "Plan amount in cents"
              },
              "currency": {
                "type": "string",
                "description": "Plan currency"
              },
              "interval": {
                "type": "string",
                "enum": ["month", "year"],
                "description": "Billing interval"
              }
            },
            "required": ["id", "amount", "currency", "interval"]
          }
        },
        "required": ["id", "status", "current_period_start", "current_period_end", "plan"]
      },
      "SubscriptionsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "subscriptions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Subscription"
            }
          }
        },
        "required": ["success", "subscriptions"]
      },
      "ChangePasswordRequest": {
        "type": "object",
        "properties": {
          "currentPassword": {
            "type": "string",
            "minLength": 1,
            "description": "User's current password (required, non-empty)"
          },
          "newPassword": {
            "type": "string",
            "minLength": 8,
            "pattern": "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[^A-Za-z0-9]).{8,}$",
            "description": "New password (min 8 chars, must contain: uppercase letter, lowercase letter, number, and special character)",
            "example": "MyNewPass123!"
          },
          "confirmPassword": {
            "type": "string",
            "minLength": 8,
            "description": "Confirmation of new password (must exactly match newPassword)",
            "example": "MyNewPass123!"
          }
        },
        "required": ["currentPassword", "newPassword", "confirmPassword"]
      },
      "LemonSqueezyCheckoutRequest": {
        "type": "object",
        "properties": {
          "variantId": {
            "type": "string",
            "description": "LemonSqueezy variant ID for the product"
          },
          "customPrice": {
            "type": "integer",
            "minimum": 0,
            "description": "Custom price in cents (optional)"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Additional metadata for the checkout"
          }
        },
        "required": ["variantId"]
      },
      "LemonSqueezyCheckoutResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "checkoutUrl": {
            "type": "string",
            "format": "uri",
            "description": "LemonSqueezy checkout URL"
          }
        },
        "required": ["success", "checkoutUrl"]
      },
      "LemonSqueezySubscription": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "LemonSqueezy subscription ID"
          },
          "status": {
            "type": "string",
            "enum": ["active", "cancelled", "expired", "on_trial", "paused", "past_due", "unpaid"],
            "description": "Subscription status"
          },
          "customer_email": {
            "type": "string",
            "format": "email",
            "description": "Customer email address"
          },
          "product_name": {
            "type": "string",
            "description": "Product name"
          },
          "variant_name": {
            "type": "string",
            "description": "Variant name (e.g., Monthly, Yearly)"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the subscription was created"
          },
          "renews_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "When the subscription renews (null if cancelled)"
          }
        },
        "required": ["id", "status", "customer_email", "product_name", "variant_name", "created_at"]
      },
      "LemonSqueezySubscriptionsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "subscriptions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LemonSqueezySubscription"
            }
          },
          "meta": {
            "type": "object",
            "properties": {
              "page": {
                "type": "integer",
                "description": "Current page number"
              },
              "per_page": {
                "type": "integer",
                "description": "Items per page"
              },
              "total": {
                "type": "integer",
                "description": "Total number of subscriptions"
              }
            },
            "required": ["page", "per_page", "total"]
          }
        },
        "required": ["success", "subscriptions", "meta"]
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Bad request - invalid input data",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "error": "Invalid request data",
              "details": "itemSlug is required"
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Unauthorized - authentication required",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "error": "Unauthorized"
            }
          }
        }
      },
      "ServerError": {
        "description": "Internal server error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "success": false,
              "error": "Internal server error"
            }
          }
        }
      }
    }
  }
}
